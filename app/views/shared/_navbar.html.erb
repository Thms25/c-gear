<div class="nav-section" data-controller="drop-down-log">
    <div class="navbar">
        <h1 class="nav-title"><%= link_to (image_tag "logo.png"), gears_path %></h1>
        <div class="search-bar">
            <%= form_with url: gears_path, method: :get do %>
              <%= text_field_tag :query, params[:query], class: "nav-search-element", placeholder: "Search for a gear..."%>
            <% end %>
        </div>
      <div class="user-options">
        <%= link_to "Upload new gear", new_gear_path %>
          <div class="user-dropdown">
            <i class="fa-solid fa-bars" data-action="click->drop-down-log#dropdown"></i>
            <% if user_signed_in? && current_user.photo.attached? %>
              <%= cl_image_tag current_user.photo.key, class: "avatar", data: { action: 'click->drop-down-log#dropdown' } %>
            <% else %>
              <%= image_tag "default_avatar.png", alt: 'avatar', class: 'avatar', data: { action: 'click->drop-down-log#dropdown' } %>
            <% end %>
      </div>
   </div>
  </div>
  <div class="droop hide" data-drop-down-log-target="menu">
    <ul>
      <% if user_signed_in? %>
        <li><%= link_to "Log out", destroy_user_session_path, data: { turbo_method: :delete } %></li>
        <li><%= link_to "Profile", user_registration_path%></li>
      <% else %>
        <li><%= link_to "Login", new_user_session_path %></li>
        <li><%= link_to "Sign up", new_user_registration_path %></li>
      <% end %>
    </ul>
  </div>
</div>
